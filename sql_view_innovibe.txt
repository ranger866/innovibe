CREATE VIEW v_mahasiswa_prodi AS
SELECT 
    m.id_mhs, 
    m.nama_mhs, 
    p.prodi
FROM mahasiswa m
JOIN prodi p ON m.prodi = p.id_prodi;


CREATE VIEW v_matkul_prodi AS
SELECT 
    mk.id_matkul, 
    mk.matkul, 
    p.prodi
FROM mata_kuliah mk
JOIN prodi p ON mk.prodi = p.id_prodi;


CREATE VIEW v_dosen AS
SELECT 
    id_user, 
    username, 
    role
FROM users
WHERE role = 'dosen';


CREATE VIEW v_dosen_matkul AS
SELECT 
    u.id_user, 
    u.username AS dosen, 
    mk.id_matkul, 
    mk.matkul
FROM users u
JOIN mata_kuliah mk ON u.id_user = mk.users
WHERE u.role = 'dosen';


CREATE VIEW v_dosen_matkul_prodi AS
SELECT 
    u.id_user, 
    u.username AS dosen, 
    mk.matkul, 
    p.prodi
FROM users u
JOIN mata_kuliah mk ON u.id_user = mk.users
JOIN prodi p ON mk.prodi = p.id_prodi
WHERE u.role = 'dosen';


CREATE VIEW v_nilai_mhs_matkul AS
SELECT 
    n.id_nil, 
    m.nama_mhs, 
    mk.matkul, 
    n.nilai
FROM nilai n
JOIN mahasiswa m ON n.mhs = m.id_mhs
JOIN mata_kuliah mk ON n.matkul = mk.id_matkul;


CREATE VIEW v_nilai_mhs_prodi AS
SELECT 
    n.id_nil, 
    m.nama_mhs, 
    p.prodi, 
    mk.matkul, 
    n.nilai
FROM nilai n
JOIN mahasiswa m ON n.mhs = m.id_mhs
JOIN mata_kuliah mk ON n.matkul = mk.id_matkul
JOIN prodi p ON m.prodi = p.id_prodi;


CREATE VIEW v_nilai_mhs_dosen AS
SELECT 
    n.id_nil, 
    m.nama_mhs, 
    p.prodi, 
    mk.matkul, 
    u.username AS dosen, 
    n.nilai
FROM nilai n
JOIN mahasiswa m ON n.mhs = m.id_mhs
JOIN mata_kuliah mk ON n.matkul = mk.id_matkul
JOIN prodi p ON mk.prodi = p.id_prodi
JOIN users u ON mk.users = u.id_user
WHERE u.role = 'dosen';